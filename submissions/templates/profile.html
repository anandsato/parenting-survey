{% load staticfiles %}

<html>
<head>
	<title>
		Surveys
	</title>

<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
<!-- Latest compiled and minified JavaScript -->
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.2/js/bootstrap.min.js"></script>
<!-- Latest compiled and minified CSS -->
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/css/bootstrap.min.css">

<!-- Optional theme -->
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/css/bootstrap-theme.min.css">
<link rel="stylesheet" type="text/css" href="{% static "css/bootstrap-slider.css" %}">

<!-- Latest compiled and minified JavaScript -->
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/js/bootstrap.min.js"></script>

<SCRIPT TYPE="text/javascript" SRC="{% static "js/bootstrap-slider.js" %}"></SCRIPT>
<SCRIPT TYPE="text/javascript" SRC="{% static "js/cookie.js" %}"></SCRIPT>


<STYLE TYPE="text/css">

body {
	background-color: rgba(0,0,0,0.5);
	background-image: url({% static "img/kids.jpg" %});
	background-repeat: no-repeat;
	/*background-size: contain;*/
	background-position: top;  
	background-attachment:fixed;
	background-size: 100% auto;

}

.container {
	margin-top: 70px;
	background-color: rgba(255,255,255,0.9);

	width: 900px;
	border-radius: 20px;
	border-width: 2px;
	border-color: black;
}


#exSlider .slider-selection {
	background: #BABABA;
}

pre {
	margin-left: 30px;
	margin-right: 30px;
	white-space: normal;       /* CSS 3 */
	word-wrap: normal;
    word-break: break-word;
    font-family: "Helvetica Neue",Helvetica,Arial,sans-serif;
    background-color: rgba(255,255,255,0.7);
}
.centerfold {
	margin-left: 30px;
	margin-right: 30px;
	margin-top: 20px;
	margin-bottom: 20px;
}

.numberCircle {
	margin-left: 25px;
    display: inline-block;
    height: 40px;
    width: 40px;
    line-height: 40px;

    -moz-border-radius: 10px; /* or 50% */
    border-radius: 10px; /* or 50% */

    background-color: rgba(155,158,155,0.9);

    color: white;
    text-align: center;
    font-size: 2em;
    font-weight: bold;
    text-shadow: -1px 0 black, 0 -1px black, -1px 0 black, 0 -1px black;
/*    border-color: black;
    border-radius: 2px;*/

}

/*#totalscore {
	font-size: 25px;
}*/

.form-control {
	width: 400px;
}

.scorebox {
	/*margin-left: 25px;*/
    display: inline-block;
    height: 40px;
    width: 230px;
    line-height: 40px;

    -moz-border-radius: 10px; /* or 50% */
    border-radius: 10px; /* or 50% */

    background-color: rgba(155,158,155,0.9);

    color: white;
    text-align: left;
    padding-left: 20px;
    font-size: 22px;
    font-weight: bold;
    text-shadow: -1px 0 black, 0 1px black, 1px 0 black, 0 -1px black;
}

h1 {
	font-size: 4em;
	text-align: center;
	font-family: "Helvetica Neue",Helvetica,Arial,sans-serif;
	color: white;
/*	text-shadow: -1px 0 black, 0 1px black, 1px 0 black, 0 -1px black;
*/}

</STYLE>


<body>
<h1>TNT Conscious Child Raising Preparation</h1>
<div class="container">
	<div class="row">
	  <div class="col-md-1"></div>
	  <div class=".col-md-8">
	  	<div class="centerfold">
			<!-- <h1>TNT Conscious Child Raising Preparation</h1> -->
		</div>
			<div>
				<pre>
It’s every human’s right to have children… unfortunately. <br><br>

We need licences to drive cars, to own guns and things that can do damage to other people but no one requires licences or even any kind of qualifications to pump out children and pass on whatever unfinished business and neurotic damage we haven’t dealt with in ourselves to our children. Most people research more on the next car or house or latest gadget they are going to buy than they do on having kids and that child is going to affect your life radically more than an purchase possibly could..<br><br>

By producing this document a lot of people will not like TNT, but we don’t care because we care more about the children. We want to support the most prepared environment for them. The Earth certainly does not need more people – we are already stretching resources to the limit and the earths population will double within the next 30 years. Most people have children for unconscious selfish motives . We want them to grow up in the least damaged environment they possibly can. The child that has been brought up with parents that have been through reality checks and dealt with their stuff is going to be much happier for the child, parents and society...  so we’ll wear that judgement.<br><br>

So here’s a questionnaire that may help you decide if you’re fit and ready to be a parent that can raise very undamaged children. A score of over 80% is great and TNT recommends you have children, fully supports you and wants to help you get community around you. Less than 80% and TNT recommends you work more on yourself before you pass your unfinished business on to your potential child.  
<br><br>
Some of the unconscious impulses to produce children include:<br><br>
- Because we feel an underlying emptiness, we want someone to unconditionally love us – a tall order for a child to fill<br>
- We are having troubles with the relationship and want to tie that other person to us, ie using the child for hidden motives<br>
- Spread your genes or whatever unconscious programming you have going on in your body that may be deluding you. <br>
- Think you are doing some  good by having a child. <br>
- Have some romantic idea on how much fun it will usually be to have a child without researching the huge workload it takes and how most of the time that is not fun.<br><br>

A lot of people think they’re free thinking but it takes a huge amount of awareness to realise how conditioned that thinking is.
<br><br>
Please help us to stop breeding damaged children! Very un-damaged children can change the world, but that is extremely rare and takes a HUGE amount of personal and spiritual development and a massive workload that most people are simply not willing to do.
		</pre>

			</div>
			<div class="centerfold">

			<h2>Questionnaire</h2>
			<form id="survey" method="post" action="/">
				{% csrf_token %}
				    <label for="name">Name</label>
				    <input class="form-control" id="name" name="name" placeholder="What is your name?" width="100">
				    <br>

				{% for q in questions %}
				<div>

					<div>
						<b>Question {{ q.order }}:</b> {{ q.text }}
						<br><br>
						<div>
							<input class="bs-slider" id="ex{{ q.order }}" data-slider-id='ex{{ q.order }}Slider' type="text" data-slider-min="{{ q.min_value }}" data-slider-max="{{ q.max_value }}" data-slider-step="1" data-slider-value="5" name="{{ q.order }}"><span class="numberCircle" id="ex{{ q.order }}SliderVal">5</span>	
							
							<!-- <span id="ex{{ q.order }}CurrentSliderValLabel"> </span>-->
						
						</div>
						<br>
					</div>
				</div>
				{% endfor %}
				<div class="scorebox">Total score: <span id="totalscore">50</span> %</div><br><br>
				<button type="submit" class="btn btn-default">Submit</button>
			</form>
		</div>
	  </div>
	  <div class="col-md-1"></div>
	</div>

</div>
	



	<SCRIPT TYPE="text/javascript">
	$(function(){

		function getCookie(name) {
		    var cookieValue = null;
		    if (document.cookie && document.cookie != '') {
		        var cookies = document.cookie.split(';');
		        for (var i = 0; i < cookies.length; i++) {
		            var cookie = jQuery.trim(cookies[i]);
		            // Does this cookie string begin with the name we want?
		            if (cookie.substring(0, name.length + 1) == (name + '=')) {
		                cookieValue = decodeURIComponent(cookie.substring(name.length + 1));
		                break;
		            }
		        }
		    }
		    return cookieValue;
		}
		var csrftoken = getCookie('csrftoken');

		function csrfSafeMethod(method) {
		    // these HTTP methods do not require CSRF protection
		    return (/^(GET|HEAD|OPTIONS|TRACE)$/.test(method));
		}

		$.ajaxSetup({
		    beforeSend: function(xhr, settings) {
		        if (!csrfSafeMethod(settings.type) && !this.crossDomain) {
		            xhr.setRequestHeader("X-CSRFToken", csrftoken);
		        }
		    }
		});


		$("#survey").submit(function(event){
			event.preventDefault();
			var o = {};
			var a = $(this).serializeArray();
			console.log(JSON.stringify(a));
		    $.each(a, function() {
		    	o[this.name] = this.value || '';
		    	//console.log(JSON.stringify(this));
		        // if (o[this.name] !== undefined) {
		        //     if (!o[this.name].push) {
		        //         o[this.name] = [o[this.name]];
		        //     }
		        //     o[this.name].push(this.value || '');
		        //     console.log(this.value);
		        // } else {
		        //     o[this.name] = this.value || '';
		        // }
		    });
		    var total_score_yeah = $("#totalscore").html();
			var submit = $.post("/", {
				'json': o,
				'name': o["name"],
				'total_score': total_score_yeah,
			});
			submit.promise().done(function(){
				alert("questionnaire submitted!");
			});
		});


		$(".bs-slider").change(function(){
			var total = {{ questions|length }} * 10;
			var fraction = 100 / total;
			var score = 0;
			$(".bs-slider").each(function(i, obj){
				score = score + (obj.value * fraction);
			});
			score = Math.round( score * 10 ) / 10;
			$("#totalscore").html(score);
		});

	{% for q in questions %}

		var slider{{ q.order }} = new Slider('#ex{{ q.order }}', {
			formatter: function(value) {
				return 'Current value: ' + value;
			}
		});
		// $("#ex{{ q.order }}").slider();
		$("#ex{{ q.order }}").change(function() {
			$("#ex{{ q.order }}SliderVal").text(this.value);
		});

	
	{% endfor %}
	});
	</SCRIPT>


	



</body>
</html>

